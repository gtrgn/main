<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>360Â° Video with Pannellum</title>
    <link rel="stylesheet" href="pannellum/pannellum.css">
</head>
<body style="margin: 0;">

<!-- Container for the viewer -->
<div id="panorama" style="width: 100vw; height: 100vh;"></div>

<!-- Pannellum JS -->
<script src="pannellum/pannellum.js"></script>

<button id="playBtn" style="position:absolute; top:10px; left:10px; z-index:999;">Play Video</button>
<script>
const viewer = pannellum.viewer('panorama', {
  type: "equirectangular",
  autoRotate: 2,
  pitch: 0,
  yaw: 180,
  hfov: 110,
  compass: false,
  showControls: true,
  hotSpots: [],
  video: {
    loop: true,
    muted: true,
    autoplay: false,   // disable autoplay
    crossOrigin: "anonymous",
    sources: [{ src: "panorama.mp4", type: "video/mp4" }]
  }
});

const video = viewer.getRenderer().getVideo();

document.getElementById('playBtn').addEventListener('click', () => {
  video.play().then(() => {
    console.log('Video playing');
    viewer.load();
  }).catch(e => {
    console.error('Video play error:', e);
  });
});
</script>

</body>
</html>